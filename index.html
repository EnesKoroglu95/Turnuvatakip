<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>Turnuva Takip</title>

<style>
body{
  margin:0;
  font-family:Arial, Helvetica, sans-serif;
}

/* ÜST BAR */
.header{
  background:#c40000;
  padding:10px;
  text-align:center;
}
.header span{
  background:#0a4db8;
  color:#fff;
  padding:6px 18px;
  border-radius:6px;
  font-weight:bold;
}

/* KONTROLLER */
.controls{
  text-align:center;
  margin:15px 0;
}
select, input{
  padding:4px;
}

/* SAYFA */
.wrapper{
  width:1200px;
  margin:20px auto;
  display:flex;
  gap:10px;
}

/* SOL GRUP */
.g21box{
  width:140px;
  background:#dce9f9;
  border:1px solid #000;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:80px;
  font-weight:bold;
  color:#0a63b8;
}

/* TABLO */
table{
  width:100%;
  border-collapse:collapse;
  table-layout:fixed;
}

th, td{
  border:1px solid #000;
  width:35px;
  padding:4px;
  font-size:11px;
  text-align:center;
  white-space:normal;
}

thead th{
  background:#dce9f9;
}

.name{
  width:140px;
  text-align:left;
  padding-left:6px;
}

.green{
  background:#d9f6df;
}

.subhead th{
  background:#dce9f9;
}
</style>
</head>

<body>

<div class="header">
  <span id="title">G21 GRUBU</span>
</div>

<div class="controls">
  Grup:
  <select id="groupSelect">
    <option value="">Seç</option>
    <script>
      for(let i=1;i<=27;i++){
        document.write(`<option value="G${i}">G${i}</option>`);
      }
    </script>
  </select>

  &nbsp;&nbsp;
  Oyuncu:
  <input id="playerInput" placeholder="Oyuncu adı">
  <button onclick="search()">Bul</button>
</div>

<div class="wrapper">

<div class="g21box" id="groupBox">G--</div>

<div style="flex:1">

<table>
<thead>
<tr>
  <th class="name">Karşılaşmalar</th>
  <th>Skor</th>
  <th>Maç<br>Puanı</th>
  <th>Alınan<br>Sayı</th>
  <th>Alınması<br>Gereken Sayı</th>
  <th>Averaj</th>
  <th>EYS1</th>
  <th>EYS2</th>
</tr>
</thead>
<tbody id="matches"></tbody>
</table>

<br>

<table>
<thead class="subhead">
<tr>
  <th class="name">Sporcular</th>
  <th>Toplam<br>Maç Puanı</th>
  <th>Toplam<br>Alınan Sayı</th>
  <th>Toplam<br>Gereken Sayı</th>
  <th>Averaj</th>
  <th>EYS1</th>
  <th>EYS2</th>
  <th>Sıralama</th>
</tr>
</thead>
<tbody id="summary"></tbody>
</table>

</div>
</div>

<script>
const CSV_URL =
"https://docs.google.com/spreadsheets/d/e/2PACX-1vQ359o8xV7eUC94-244P9_A83mf5-iSYA7HNQq9sNyvk-w1iP8dCVokASwjLRaFBL-t0Hkf1wxFuq9u/pub?gid=1252443441&output=csv";

let data = [];

fetch(CSV_URL)
.then(r=>r.text())
.then(t=>{
  data = t.split("\n").map(r=>r.split(","));
});

function search(){
  const group = groupSelect.value;
  const name = playerInput.value.toUpperCase();

  if(!group || !name){
    alert("Grup ve oyuncu gir");
    return;
  }

  groupBox.innerText = group;
  title.innerText = group + " GRUBU";

  matches.innerHTML = "";
  summary.innerHTML = "";

  const filtered = data.filter(r =>
    r[0] === group && r[1].toUpperCase().includes(name)
  );

  if(filtered.length === 0){
    alert("Oyuncu bulunamadı");
    return;
  }

  filtered.forEach((r,i)=>{
    matches.innerHTML += `
    <tr class="${i%2==0?'green':''}">
      <td class="name">${r[1]}</td>
      <td>${r[2]||""}</td>
      <td>${r[3]||""}</td>
      <td>${r[4]||""}</td>
      <td>${r[5]||""}</td>
      <td>${r[6]||""}</td>
      <td>${r[7]||""}</td>
      <td>${r[8]||""}</td>
    </tr>`;
  });

  summary.innerHTML = `
    <tr>
      <td class="name">${name}</td>
      <td></td><td></td><td></td><td></td><td></td><td></td><td></td>
    </tr>`;
}
</script>

</body>
</html>
