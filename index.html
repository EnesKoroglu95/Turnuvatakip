<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>Turnuva Takip</title>

<style>
body{
    margin:0;
    font-family:Arial, sans-serif;
    background:#fff;
}

/* ÜST BAR */
.header{
    background:#c80000;
    padding:10px;
    text-align:center;
}
.header span{
    background:#0b5ed7;
    color:#fff;
    padding:6px 20px;
    border-radius:6px;
    font-weight:bold;
}

/* KONTROLLER */
.controls{
    text-align:center;
    margin:20px 0;
}
select, input{
    padding:4px;
    font-size:14px;
}

/* ANA ALAN */
.wrapper{
    width:95%;
    margin:auto;
    display:flex;
}

/* SOL GRUP */
.groupBox{
    width:130px;
    background:#e6f0ff;
    border:1px solid #000;
    display:flex;
    align-items:center;
    justify-content:center;
    font-size:48px;
    font-weight:bold;
    color:#0b5ed7;
}

/* TABLOLAR */
.tables{
    flex:1;
    margin-left:10px;
}

table{
    width:100%;
    border-collapse:collapse;
    margin-bottom:15px;
}
th, td{
    border:1px solid #000;
    padding:5px;
    font-size:13px;
    text-align:center;
}
th{
    background:#e6f0ff;
}
.name{
    text-align:left;
    padding-left:6px;
}
tbody tr:nth-child(odd) td{
    background:#e8fff0;
}
</style>
</head>

<body>

<div class="header">
    <span>G21 GRUBU</span>
</div>

<div class="controls">
    Grup:
    <select id="groupSelect">
        <option value="">Seç</option>
        <script>
            for(let i=1;i<=27;i++){
                document.write(`<option value="G${i}">G${i}</option>`);
            }
        </script>
    </select>

    &nbsp;&nbsp;
    Oyuncu Ara:
    <input type="text" id="playerInput" placeholder="Oyuncu Adı Soyadı">
    <button onclick="search()">Bul</button>
</div>

<div class="wrapper">

    <div class="groupBox" id="groupBox">G--</div>

    <div class="tables">

        <!-- KARŞILAŞMALAR -->
        <table>
            <thead>
                <tr>
                    <th>Karşılaşmalar</th>
                    <th>Skor</th>
                    <th>Maç Puanı</th>
                    <th>Alınan Sayı</th>
                    <th>Alınması Gereken Sayı</th>
                    <th>Averaj</th>
                    <th>EYS1</th>
                    <th>EYS2</th>
                </tr>
            </thead>
            <tbody id="matches"></tbody>
        </table>

        <!-- SPORCULAR -->
        <table>
            <thead>
                <tr>
                    <th>Sporcular</th>
                    <th>Toplam Maç Puanı</th>
                    <th>Toplam Alınan Sayı</th>
                    <th>Toplam Gereken Sayı</th>
                    <th>Averaj</th>
                    <th>EYS1</th>
                    <th>EYS2</th>
                    <th>Sıralama</th>
                </tr>
            </thead>
            <tbody id="summary"></tbody>
        </table>

    </div>
</div>

<script>
const CSV_URL =
"https://docs.google.com/spreadsheets/d/e/2PACX-1vQ359o8xV7eUC94-244P9_A83mf5-iSYA7HNQq9sNyvk-w1iP8dCVokASwjLRaFBL-t0Hkf1wxFuq9u/pub?output=csv";

let data = [];

fetch(CSV_URL)
.then(r=>r.text())
.then(t=>{
    data = t.split("\n").map(r=>r.split(","));
});

function search(){
    const group = document.getElementById("groupSelect").value;
    const name = document.getElementById("playerInput").value.trim().toUpperCase();

    if(!group || !name){
        alert("Grup ve oyuncu adı seç");
        return;
    }

    document.getElementById("groupBox").innerText = group;

    const matches = document.getElementById("matches");
    const summary = document.getElementById("summary");
    matches.innerHTML = "";
    summary.innerHTML = "";

    const filtered = data.filter(r =>
        r[0] === group && r[1] && r[1].toUpperCase().includes(name)
    );

    if(filtered.length === 0){
        alert("Oyuncu bu grupta bulunamadı");
        return;
    }

    filtered.forEach(r=>{
        matches.innerHTML += `
        <tr>
            <td class="name">${r[1]}</td>
            <td>${r[2]||""}</td>
            <td>${r[3]||""}</td>
            <td>${r[4]||""}</td>
            <td>${r[5]||""}</td>
            <td>${r[6]||""}</td>
            <td>${r[7]||""}</td>
            <td>${r[8]||""}</td>
        </tr>`;
    });

    summary.innerHTML = `
    <tr>
        <td class="name">${name}</td>
        <td></td><td></td><td></td><td></td><td></td><td></td><td></td>
    </tr>`;
}
</script>

</body>
</html>
