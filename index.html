<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>Turnuva Takip</title>

<style>
body{margin:0;font-family:Arial,Helvetica,sans-serif;}
.header{background:#c40000;padding:10px;text-align:center;}
.header span{background:#0a4db8;color:#fff;padding:6px 18px;border-radius:6px;font-weight:bold;}

.controls{text-align:center;margin:15px 0;}
select,input,button{padding:6px;margin:3px;}

.wrapper{max-width:1200px;margin:10px auto;padding:5px;}
.g21box{
  width:120px;height:120px;
  background:#dce9f9;border:1px solid #000;
  display:flex;align-items:center;justify-content:center;
  font-size:48px;font-weight:bold;color:#0a63b8;
  margin-bottom:10px;
}

table{width:100%;border-collapse:collapse;table-layout:fixed;}
th,td{border:1px solid #000;padding:4px;font-size:11px;text-align:center;word-wrap:break-word;}
th{background:#dce9f9;}
.name{text-align:left;}

@media(max-width:700px){
  table{display:block;overflow-x:auto;}
}
</style>
</head>

<body>

<div class="header">
  <span id="title">TUR 1</span>
</div>

<div class="controls">
  Grup:
  <select id="groupSelect">
    <option value="">Hepsi</option>
    <script>
      for(let i=1;i<=27;i++){
        document.write(`<option value="G${i}">G${i}</option>`);
      }
    </script>
  </select>

  Oyuncu:
  <input id="playerInput" placeholder="İsim yaz">
  <button onclick="loadData()">Göster</button>
</div>

<div class="wrapper">
  <div class="g21box" id="groupBox">--</div>

  <table>
    <thead>
      <tr>
        <th class="name">Oyuncu</th>
        <th>Rakip</th>
        <th>Skor</th>
        <th>MP</th>
        <th>AS</th>
        <th>GS</th>
        <th>Av</th>
      </tr>
    </thead>
    <tbody id="matches"></tbody>
  </table>
</div>

<script>
const DATA_URL = "https://opensheet.elk.sh/1s0fY_9-99WAT_G4XyPDdWeQnVThyjfCCC9IzqwZ662Y/TUR1";
let allData = [];

fetch(DATA_URL)
  .then(res => res.json())
  .then(json => allData = json);

function loadData(){
  const group = groupSelect.value;
  const name = playerInput.value.toUpperCase();
  matches.innerHTML = "";

  let filtered = allData;

  if(group){
    filtered = filtered.filter(r => r.grup === group);
    groupBox.innerText = group;
  } else {
    groupBox.innerText = "--";
  }

  if(name){
    filtered = filtered.filter(r => r.oyuncu.toUpperCase().includes(name));
  }

  if(filtered.length === 0){
    matches.innerHTML = "<tr><td colspan='7'>Kayıt bulunamadı</td></tr>";
    return;
  }

  filtered.forEach(r=>{
    matches.innerHTML += `
      <tr>
        <td class="name">${r.oyuncu}</td>
        <td>${r.rakip}</td>
        <td>${r.skor}</td>
        <td>${r.mac_puani}</td>
        <td>${r.alinan_sayi}</td>
        <td>${r.gereken_sayi}</td>
        <td>${r.averaj}</td>
      </tr>
    `;
  });
}
</script>

</body>
</html>
